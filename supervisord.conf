[supervisord]
nodaemon=true
logfile=/var/log/supervisord.log
pidfile=/var/run/supervisord.pid
loglevel=info

[program:startup-banner]
command=/bin/sh -c 'echo "" && echo "╔═══════════════════════════════════════════════════════════╗" && echo "║                                                           ║" && echo "║       ██╗████████╗████████╗██████╗                        ║" && echo "║       ██║╚══██╔══╝╚══██╔══╝██╔══██╗                       ║" && echo "║       ██║   ██║      ██║   ██████╔╝                       ║" && echo "║  ██   ██║   ██║      ██║   ██╔══██╗                       ║" && echo "║  ╚█████╔╝   ██║      ██║   ██████╔╝                       ║" && echo "║   ╚════╝    ╚═╝      ╚═╝   ╚═════╝                        ║" && echo "║                                                           ║" && echo "║         JTTB - Terminal Toolbox v1.0                      ║" && echo "║         Kubernetes Debugging Tools                        ║" && echo "║                                                           ║" && echo "╚═══════════════════════════════════════════════════════════╝" && echo ""'
autostart=true
autorestart=false
startsecs=0
priority=1
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0

[program:jttb-backend]
command=/bin/sh -c 'echo "[JTTB] ▶ Starting Backend..." && echo "[JTTB]   → Port: 3000" && echo "[JTTB]   → User: $JTTB_USER" && echo "[JTTB]   → Shell: ${JTTB_SHELL:-auto}" && echo "[JTTB]   → Timeout: ${JTTB_EXEC_TIMEOUT:-30000}ms" && echo "" && node /app/jttb-back/server.js'
directory=/app/jttb-back
autostart=true
autorestart=true
priority=10
startretries=3
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:nginx]
command=/bin/sh -c 'echo "[JTTB] ▶ Starting Nginx (Frontend)..." && echo "[JTTB]   → Port: 80" && echo "[JTTB]   → Proxying /api → localhost:3000" && echo "" && echo "[JTTB] ✓ JTTB Ready! Access via http://localhost:80" && echo "" && nginx -g "daemon off;"'
autostart=true
autorestart=true
priority=20
startretries=3
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
